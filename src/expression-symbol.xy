
let closure_code (o, i, d) =
	"\txy_closure_get(" + o + ", c, " + i + ", " + d + ");\n"


let expression_symbol (tok) =
	@(o, compiler) =
		with ([i, d] = closure_find(compiler::closure, tok::sym))
			i -> @{
				let (-1) =
					["\txy_value_set_function(" + o +
						", " + function_name(tok::sym) + ", NULL);\n",
					compiler]
				let (i) =
					[closure_code(o, i, d), compiler] }
;


let expression_closure_index (i, d) =
	@(o, compiler) =
		[closure_code(o, i, d), compiler]