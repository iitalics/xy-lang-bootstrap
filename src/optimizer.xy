
let optimize (exp) =
	(exp::constant and (exp::primitive -> void?)) -> @{
		let (true) =
			optimize_get_optimized(exp) -> optimize
		let () = exp }
		
			
let optimize_get_optimized (exp) =
	try(@() = 
		exp::eval() -> @{
			let ([]) = exp
			let (es) = expression_const(hd es) },
		@() = exp + { constant = false })
